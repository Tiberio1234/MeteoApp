@page "/analytics"
@rendermode InteractiveServer
@using ViewModels
@inject AnalyticsViewModel AnalitycsViewModel
<h3>City Analysis</h3>
<RadzenStack class="rz-p-0 rz-p-md-6 rz-p-lg-12" AlignItems="AlignItems.Center" Orientation="Orientation.Vertical" Style="width:100%">
    <RadzenStack Orientation="Orientation.Horizontal">
    <RadzenCard>
        <h4>Population of cities in (M)</h4>
            <RadzenChart Visible="true" Style="width:500px">
				<RadzenPieSeries Data="@AnalitycsViewModel.CityPopulationDataItem" Title="Population" CategoryProperty="CityName" ValueProperty="PupulationInMillions">
					<RadzenSeriesDataLabels Visible="true" />
				</RadzenPieSeries>
			</RadzenChart>
    </RadzenCard>
    <RadzenCard>
            <h4>Foreign Visitors of cities in (M)</h4>
            <RadzenChart Style="width:500px">
                <RadzenColumnSeries Data="@AnalitycsViewModel.CityPopulationDataItem" CategoryProperty="CityName" Title="Cities" ValueProperty="CityBeautyPercentage">
                </RadzenColumnSeries>
                <RadzenColumnOptions Radius="5" />
                <RadzenValueAxis Step="20" Min="0" Max="100">
                    <RadzenGridLines Visible="true" />
                    <RadzenAxisTitle Text="Percentage of beauty" />
                </RadzenValueAxis>
            </RadzenChart>
            
    </RadzenCard>
    </RadzenStack>
    <RadzenCard>
        <h4>Foreign Visitors of cities in (M)</h4>
        <RadzenChart Style="width:100%">
            <RadzenColumnSeries Data="@AnalitycsViewModel.CityPopulationDataItem" CategoryProperty="CityName" Title="Cities" ValueProperty="CityBeautyPercentage">
            </RadzenColumnSeries>
            <RadzenColumnOptions Radius="5" />
            <RadzenValueAxis Step="20" Min="0" Max="100">
                <RadzenGridLines Visible="true" />
                <RadzenAxisTitle Text="Percentage of beauty" />
            </RadzenValueAxis>
        </RadzenChart>

    </RadzenCard>
</RadzenStack>


@code {

    protected override void OnAfterRender(bool firstRender)
	{
        if (firstRender){
			AnalitycsViewModel.LoadData();
		}

	}
    
}
